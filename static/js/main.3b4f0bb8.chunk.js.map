{"version":3,"sources":["logo.svg","Slider.js","initCondTable.js","ratesTable.js","textArea.js","rk.js","general_model.js","models.js","graph.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","root","width","input","MySlider","withStyles","thumb","backgroundColor","border","active","Slider","roundToSignificantFigures","num","n","d","Math","ceil","log10","power","floor","magnitude","round","InputSlider","steps","min","max","color","log","type","index","value","sliderChangedCallback","sliderLogToggledCallback","disabled","classes","linStep","logStep","inputStep","exp","Grid","container","spacing","alignItems","item","xs","ToggleButton","selected","onChange","event","newValue","new_val","aria-labelledby","step","Input","margin","className","target","Number","inputProps","InitCondTable","data","TableContainer","component","Paper","Table","size","aria-label","TableHead","TableRow","TableCell","align","TableBody","map","entry","math","texName","errorColor","init","RatesTable","log_fr","min_fr","max_fr","fr","log_br","min_br","max_br","br","TextArea","schemeText","modelSubmitCallback","textChangedCallback","TextareaAutosize","placeholder","style","fontSize","fontFamily","Button","variant","onClick","_scalarMult","scalar","vector","res","Array","i","_vecAdd2Sec","a","b","UndependentVariableError","Error","rungeKutta4","ODE","initialCondition","range","t0","t1","stepSize","length","rk4Multi","rk4Single","f","h","j","t_start","t","x","y","k1","k2","k3","k4","xVals","yVals","m","yLast","result","k","prototype","equals","console","warn","array","this","l","Object","defineProperty","enumerable","GeneralModel","initial_conditions","elem_reactions","scheme","func","diffEquations","diffEquationsFRates","from_comp","to_comp","forward_rate","backward_rate","reaction","el","push","names","forEach","comp","includes","getCompartments","c","replaceAll","backwardRates","comps","fComps","getLatexFormattedCompartments","dict","rateNames","fFromComps","fToComps","occursFC","occurences","occursTC","key","fArrow","frNoColor","join","useZeroBR","values","forward_rates","backward_rates","solution","idx_from","idx_to","includeBackwardRates","getRateNames","compsF","comps_len","posTerms","negTerms","forward_prod","backward_prod","fList","bList","occursF","occursB","posOccurs","allOccurs","terms","sign","numStr","abs","inv_dict","r","_forward_rates","_backward_rates","i_from","i_to","_buildDiffEq","dc_dt","fill","subtractOccurences","_model","split","line","white_space_filter","match","sides","side","tokens","plusIndices","re","s","exec","deleted","startIdx","endIdx","splice","splitSide","lastIdx","substring","token","containsNum","number","parseInt","name","addElementaryReaction","kineticModels","class","description","nonZeroBackwardRates","initialConditions","A","logSlider","B","C","D","E","F","G","H","I","J","K","Rabbit","Wolf","DeadWolf","rates","forwardRate","backwardRate","forwardRateMin","forwardRateMax","backwardRateMin","backwardRateMax","forwardRateLogSlider","backwardRateLogSlider","Susceptible","Infected","Recovered","Dead","Exposed","S","ES","P","tPS","PS","T","PlotlyGraph","layout","config","frames","revision","useResizeHandler","height","App","state","initData","ratesData","figure","xaxis","title","showgrid","zeroline","linecolor","linewidth","mirror","yaxis","autosize","scrollZoom","responsive","texEquation","cbNonZero","model","modelSubmitted","bind","sliderValueChanged","cbNonZero_checkedChanged","modelChanged","simulateModel","diff","mode","pop","text","setState","selecteModel","lastInitData","lastRatesData","fromText","init_value","condition","fr_val","br_val","buildFunc","simulModel","alert","f_val","parseFloat","objectChosen","checked","direction","Autocomplete","options","sort","localeCompare","groupBy","option","getOptionLabel","renderInput","params","TextField","label","FormControlLabel","control","Checkbox","React","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3b4f0bb8.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.2d27ead7.svg\";","import React from 'react';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\n// import Typography from '@material-ui/core/Typography';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Input from '@material-ui/core/Input';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\n// import VolumeUp from '@material-ui/icons/VolumeUp';\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    width: 250,\r\n  },\r\n  input: {\r\n    width: 100,\r\n  },\r\n});\r\n\r\n// const useStyles = makeStyles({\r\n//   root: {\r\n//         color: '#ff0000',\r\n//   },\r\n//   thumb: {\r\n//        backgroundColor: '#fff',\r\n//        border: '3px solid currentColor',\r\n//      },\r\n\r\n// })\r\n\r\n\r\nconst MySlider = withStyles({\r\n  thumb: {\r\n    backgroundColor: '#ffffff',\r\n    border: '3px solid currentColor',\r\n  },\r\n  active: {},\r\n})(Slider);\r\n\r\nfunction round(value, digits) {\r\n  return Math.round((value + Number.EPSILON) * 10**digits) / 10**digits\r\n}\r\n\r\n// https://stackoverflow.com/questions/202302/rounding-to-an-arbitrary-number-of-significant-digits\r\nfunction roundToSignificantFigures(num, n) {\r\n  if(num == 0) {\r\n      return 0;\r\n  }\r\n\r\n  let d = Math.ceil(Math.log10(num < 0 ? -num: num));\r\n  let power = n - Math.floor(d);\r\n\r\n  let magnitude = 10 ** power;\r\n  let shifted = Math.round(num * magnitude);\r\n  return shifted / magnitude;\r\n}\r\n\r\n\r\n// const RedSlider = withStyles({\r\n//   root: {\r\n//     color: '#ff0000',\r\n//     // height: 8,\r\n//   },\r\n//   thumb: {\r\n//     // height: 24,\r\n//     // width: 24,\r\n//     backgroundColor: '#fff',\r\n//     border: '3px solid currentColor',\r\n//     // marginTop: -8,\r\n//     // marginLeft: -12,\r\n//     // '&:focus, &:hover, &$active': {\r\n//     //   boxShadow: 'inherit',\r\n//     // },\r\n//   },\r\n//   active: {},\r\n//   // valueLabel: {\r\n//   //   left: 'calc(-50% + 4px)',\r\n//   // },\r\n//   // track: {\r\n//   //   height: 8,\r\n//   //   borderRadius: 4,\r\n//   // },\r\n//   // rail: {\r\n//   //   height: 8,\r\n//   //   borderRadius: 4,\r\n//   // },\r\n// })(Slider);\r\n\r\nexport default function InputSlider({ steps, min, max, color, log, type, index, value, \r\n  sliderChangedCallback, sliderLogToggledCallback, disabled }) {\r\n  const classes = useStyles();\r\n  // const [value, setValue] = React.useState(typeof defaultValue === 'undefined' ? 0 : defaultValue);\r\n\r\n  // const [toggled, setToggled] = React.useState(false);\r\n\r\n  const sigDigits = 3;\r\n\r\n  const handleSliderChange = (event, newValue) => {\r\n    if (value !== newValue) {\r\n      // setValue(newValue);\r\n      let new_val = (log === true) ? Math.exp(newValue) : newValue;\r\n      sliderChangedCallback(type, index, roundToSignificantFigures(new_val, sigDigits));\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    let newValue = event.target.value === '' ? 0 : Number(event.target.value);\r\n\r\n    if (value !== newValue) {\r\n      sliderChangedCallback(type, index, roundToSignificantFigures(newValue, sigDigits));\r\n      // setValue(newValue);\r\n    }\r\n  };\r\n\r\n\r\n  // const handleBlur = () => {\r\n  //   if (value < 0) {\r\n  //     setValue(0);\r\n  //   } else if (value > 100) {\r\n  //     setValue(100);\r\n  //   }\r\n  // };\r\n\r\n  value = typeof value === 'number' ? value : 0;\r\n  if (log)\r\n    min = (min <= 0) ? max * 1e-6 : min;  // make min value 6 orders of magnitude lower from maximum value \r\n\r\n  let linStep = (max - min) / steps;\r\n  let logStep = (Math.log(max) - Math.log(min)) / steps;\r\n\r\n  // calculates the linear step for input field\r\n  let inputStep = log ? Math.exp(Math.log(value) + logStep) - value : linStep;\r\n  inputStep = roundToSignificantFigures(inputStep, 3)\r\n  \r\n  // console.log(inputStep);\r\n\r\n  //   function valueLabelFormat(value) {\r\n  //     const [coefficient, exponent] = value\r\n  //       .toExponential()\r\n  //       .split('e')\r\n  //       .map((item) => Number(item));\r\n  //     return `${Math.round(coefficient)}e^${exponent}`;\r\n  //   }\r\n\r\n  return (\r\n    <div >\r\n      <Grid container spacing={2} alignItems=\"center\">\r\n        <Grid item xs>\r\n          <ToggleButton\r\n            // value='check'\r\n            selected={log}\r\n            disabled={disabled}\r\n            onChange={() => sliderLogToggledCallback(type, index)}\r\n          >Log</ToggleButton>\r\n        </Grid>\r\n        <Grid item xs>\r\n          <MySlider\r\n            value={log ? Math.log(value) : value}\r\n            onChange={handleSliderChange}\r\n            aria-labelledby=\"input-slider\"\r\n            min={log ? Math.log(min) : min}\r\n            max={log ? Math.log(max) : max}\r\n            step={log ? logStep : linStep}\r\n            //className={classes.root}\r\n            color={color}\r\n            disabled={disabled}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <Input\r\n            value={value}\r\n            margin=\"dense\"\r\n            className={classes.input}\r\n            // multiline={true}\r\n            onChange={handleInputChange}\r\n            // onBlur={handleBlur}\r\n            inputProps={{\r\n                min:  min,\r\n                max:  max,\r\n                step: inputStep,\r\n              type: 'number',\r\n              'aria-labelledby': 'input-slider',\r\n            }}\r\n            disabled={disabled}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n\r\n  // return (\r\n  //   <div >\r\n  //     <Grid container spacing={2} alignItems=\"center\">\r\n  //       <Grid item xs>\r\n  //         {forwardRateSlider ? (\r\n  //         <BlueSlider\r\n  //           value={typeof value === 'number' ? value : 0}\r\n  //           onChange={handleSliderChange}\r\n  //           aria-labelledby=\"input-slider\"\r\n  //           min={typeof min === 'undefined' ? 0 : min}\r\n  //           max={typeof max === 'undefined' ? 100 : max}\r\n  //           step={typeof step === 'undefined' ? 1 : step}\r\n  //         />)\r\n  //         : (\r\n  //           <RedSlider\r\n  //           value={typeof value === 'number' ? value : 0}\r\n  //           onChange={handleSliderChange}\r\n  //           aria-labelledby=\"input-slider\"\r\n  //           min={typeof min === 'undefined' ? 0 : min}\r\n  //           max={typeof max === 'undefined' ? 100 : max}\r\n  //           step={typeof step === 'undefined' ? 1 : step}\r\n  //           disabled={disabled}\r\n  //         />\r\n  //         )}\r\n  //       </Grid>\r\n  //       <Grid item>\r\n  //         <Input\r\n  //           value={value}\r\n  //           margin=\"dense\"\r\n  //           // multiline={true}\r\n  //           onChange={handleInputChange}\r\n  //           onBlur={handleBlur}\r\n  //           inputProps={{\r\n  //               min: typeof min === 'undefined' ? 0 : min,\r\n  //               max: typeof max === 'undefined' ? 100 : max,\r\n  //               step: typeof step === 'undefined' ? 1 : step,\r\n  //             type: 'number',\r\n  //             'aria-labelledby': 'input-slider',\r\n  //           }}\r\n  //           disabled={disabled}\r\n  //         />\r\n  //       </Grid>\r\n  //     </Grid>\r\n  //   </div>\r\n  // );\r\n}\r\n\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport InputSlider from './Slider.js'\r\nimport './App.css';\r\n\r\nimport { InlineMath } from 'react-katex';\r\nimport 'katex/dist/katex.min.css';\r\n\r\n// const useStyles = makeStyles({\r\n//   table: {\r\n//     minWidth: 650,\r\n//   },\r\n// });\r\n\r\n// function createData(name, calories, fat, carbs, protein) {\r\n//   return { name, calories, fat, carbs, protein };\r\n// }\r\n\r\n// const rows = [\r\n//   createData('Frozen yoghurt', 159, 6.0, 24, 4.0),\r\n//   createData('Ice cream sandwich', 237, 9.0, 37, 4.3),\r\n//   createData('Eclair', 262, 16.0, 24, 6.0),\r\n//   createData('Cupcake', 305, 3.7, 67, 4.3),\r\n//   createData('Gingerbread', 356, 16.0, 49, 3.9),\r\n// ];\r\n\r\nexport default function InitCondTable( {data, sliderChangedCallback, sliderLogToggledCallback} ) {\r\n//   const classes = useStyles();\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table size=\"small\" aria-label=\"simple table\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell align=\"center\">Compartment</TableCell>\r\n            <TableCell align=\"center\">Initial conditions</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {data.map((entry, index) => (\r\n            <TableRow>\r\n              <TableCell align=\"center\"><InlineMath math={entry.texName} errorColor={'#cc0000'}/></TableCell>\r\n              <TableCell align=\"center\">\r\n                <InputSlider \r\n                  log={entry.log}\r\n                  steps={100} \r\n                  min={entry.min}\r\n                  max={entry.max} \r\n                  value={entry.init}\r\n                  type='init'\r\n                  index={index}\r\n                  color='primary'\r\n                  sliderChangedCallback={sliderChangedCallback}\r\n                  sliderLogToggledCallback={sliderLogToggledCallback}>\r\n                </InputSlider>\r\n              </TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n}\r\n\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport InputSlider from './Slider.js'\r\n\r\nimport { InlineMath } from 'react-katex';\r\nimport 'katex/dist/katex.min.css';\r\n\r\n\r\nexport default function RatesTable({data, disabled, sliderChangedCallback, sliderLogToggledCallback}) {\r\n    //   const classes = useStyles();\r\n  \r\n    return (\r\n      <TableContainer component={Paper}>\r\n        <Table size=\"small\" aria-label=\"simple table\">\r\n          <TableHead>\r\n            <TableRow>\r\n              <TableCell align=\"center\">Rate constant</TableCell>\r\n              <TableCell align=\"center\">Forward rates</TableCell>\r\n              <TableCell align=\"center\">Backward rates</TableCell>\r\n            </TableRow>\r\n          </TableHead>\r\n          <TableBody>\r\n              {data.map((entry, index) => (\r\n                  <TableRow>\r\n                    <TableCell align=\"center\">\r\n                      <InlineMath math={entry.texName} errorColor={'#cc0000'}/>\r\n                    </TableCell>\r\n                      <TableCell align=\"center\">\r\n                        <InputSlider log={entry.log_fr} \r\n                          steps={100} \r\n                          min={entry.min_fr}\r\n                          max={entry.max_fr} \r\n                          value={entry.fr}\r\n                          type=\"fr\"\r\n                          index={index} \r\n                          sliderChangedCallback={sliderChangedCallback}\r\n                          sliderLogToggledCallback={sliderLogToggledCallback}\r\n                          color=\"primary\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell align=\"center\">\r\n                        <InputSlider log={entry.log_br} \r\n                          steps={100} \r\n                          min={entry.min_br} \r\n                          max={entry.max_br} \r\n                          value={entry.br} \r\n                          type=\"br\"\r\n                          index={index} \r\n                          sliderChangedCallback={sliderChangedCallback}\r\n                          sliderLogToggledCallback={sliderLogToggledCallback}\r\n                          disabled={disabled}\r\n                          color=\"secondary\"\r\n                        />\r\n                      </TableCell>\r\n                  </TableRow>\r\n              ))}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n    );\r\n}","import React from 'react';\r\nimport TextareaAutosize from '@material-ui/core/TextareaAutosize';\r\nimport { Button } from '@material-ui/core';\r\n\r\n\r\n// export default class TextArea extends React.Component {\r\n\r\n//     constructor(props) {\r\n//         super(props);\r\n//         this.state = {\r\n//             text: typeof props.text === 'undefined' ? \"\" : props.text\r\n//         }\r\n//         // this.callBack = props.modelSubmitCallback;\r\n//         this.handleChange = this.handleChange.bind(this);\r\n//     }\r\n\r\n//     handleChange (event) {\r\n//         this.setState(state => ({text: event.target.value}));\r\n//     };\r\n\r\n//     render() {\r\n//         return (\r\n//             <div>\r\n//                 <TextareaAutosize onChange={this.handleChange} aria-label=\"empty textarea\" placeholder=\"Model...\" value={this.state.text}></TextareaAutosize>\r\n//                 <br/>\r\n//                 <Button variant=\"contained\" \r\n//                     onClick={() => this.props.modelSubmitCallback(this.state.text)} \r\n//                     color=\"primary\">Submit</Button>\r\n//             </div>\r\n//         );\r\n//     }\r\n// }\r\n\r\n\r\nexport default function TextArea({schemeText, modelSubmitCallback, textChangedCallback}) {\r\n    // const [text, setValue] = React.useState(typeof props.schemeText === 'undefined' ? \"\" : props.schemeText);\r\n  \r\n    return (\r\n        <div>\r\n          <div className=\"text-area\">\r\n            <TextareaAutosize \r\n              onChange={event => textChangedCallback(event.target.value)} \r\n              aria-label=\"empty textarea\" \r\n              placeholder=\">> Place kinetic model here <<\"\r\n              style={{fontSize: 18, fontFamily: 'Palatino'}}\r\n              value={schemeText}>\r\n            </TextareaAutosize>\r\n            </div>\r\n            <Button variant=\"contained\" \r\n                onClick={() => modelSubmitCallback()} \r\n                color=\"primary\">Submit</Button>\r\n        </div>\r\n    );\r\n  }\r\n","// from https://github.com/giannotr/runge-kutta-js, modified\r\n\r\n// \"use strict\";\r\n// var __assign = (this && this.__assign) || function () {\r\n//     __assign = Object.assign || function(t) {\r\n//         for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n//             s = arguments[i];\r\n//             for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n//                 t[p] = s[p];\r\n//         }\r\n//         return t;\r\n//     };\r\n//     return __assign.apply(this, arguments);\r\n// };\r\n\r\n// var __spreadArrays = (this && this.__spreadArrays) || function () {\r\n//     for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n//     for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n//         for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n//             r[k] = a[j];\r\n//     return r;\r\n// };\r\n\r\n// Object.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction _scalarMult (scalar, vector, n) {\r\n    /*\r\n    * Creates a new array.\r\n    */\r\n    var res = new Array(n);\r\n    for (let i = 0; i < n; i++){\r\n        res[i] = vector[i] * scalar;\r\n    }\r\n    return res; \r\n}\r\n\r\nfunction _vecAdd2Sec (a, b, n) { \r\n    /*\r\n    * Adds a to second array (b) and returns it !!!!! \r\n    */\r\n    for (let i = 0; i < n; i++){\r\n        b[i] += a[i];\r\n    }\r\n    return b; \r\n}\r\n\r\n\r\nlet UndependentVariableError = new Error('The destination of the undependent variable has to be greater than its start');\r\n// let StepSizeDivisibilityError = new Error('The range has to be an divisible by the step size');\r\n\r\nexport function rungeKutta4(ODE, initialCondition, range=[0, 1], steps=500) {\r\n    var t0 = range[0], t1 = range[1];\r\n\r\n    if (t1 <= t0)\r\n        throw UndependentVariableError;\r\n\r\n    var stepSize = (t1 - t0) / steps;\r\n\r\n    return initialCondition.length > 1 ? \r\n        rk4Multi(ODE, steps, stepSize, initialCondition, t0) : \r\n        rk4Single(ODE, steps, stepSize, initialCondition, t0);\r\n\r\n    // if (stepSize === void 0) { stepSize = 1; }\r\n    // var _return;\r\n    //     var steps = Math.round((t1 - t0) / stepSize);\r\n    //     // var args = {\r\n    //     //     equation: ODE,\r\n    //     //     start: t0,\r\n    //     //     stepSize: stepSize,\r\n    //     //     steps: steps,\r\n    //     // };\r\n    //     // if (Number.isInteger(steps)) {\r\n    //     if (typeof initialCondition === 'object' && initialCondition.length > 1) {\r\n    //         // _return = rk4Multi(__assign(__assign({}, args), { initialCondition: initialCondition }));\r\n    //         _return = rk4Multi(ODE, steps, stepSize, initialCondition, t0);\r\n\r\n    //     }\r\n    //     else {\r\n    //         var _initialCondition = void 0;\r\n    //         if (typeof initialCondition === 'object') {\r\n    //             _initialCondition = initialCondition[0];\r\n    //         }\r\n    //         else {\r\n    //             _initialCondition = initialCondition;\r\n    //         }\r\n    //         _return = rk4Single(__assign(__assign({}, args), { initialCondition: _initialCondition }));\r\n    //     }\r\n    //     return _return;\r\n    //     // }\r\n    //     // throw StepSizeDivisibilityError;\r\n    // }\r\n    // throw UndependentVariableError;\r\n}\r\n\r\nfunction rk4Single (f, n, h, j, t_start) {\r\n    /*\r\n    * f - function to call\r\n    * n - number of steps\r\n    * h - step size\r\n    * j - initial condition - must be number\r\n    * t_start = time at initial conditions\r\n     */\r\n    var t = t_start;\r\n    var x = new Array(n+1);  // x values\r\n    var y = new Array(n+1)   // y values\r\n    x[0] = t; // t start\r\n    y[0] = j;\r\n    var i = 0;\r\n    var k1, k2, k3, k4;\r\n    while (i < n) {\r\n        k1 = f(t, y[i]);\r\n        k2 = f(t + (.5 * h), y[i] + (.5 * h * k1));\r\n        k3 = f(t + (.5 * h), y[i] + (.5 * h * k2));\r\n        k4 = f(t + h, y[i] + (h * k3));\r\n        y[i + 1] = y[i] + (h * (k1 + (2 * k2) + (2 * k3) + k4) / 6);\r\n        t += h;\r\n        i++;\r\n        x[i] = t;\r\n    }\r\n    return {xVals: x, yVals: y};\r\n}\r\n\r\n\r\nfunction rk4Multi(f, n, h, j, t_start) {\r\n    /*\r\n    * f - function to call\r\n    * n - number of steps\r\n    * h - step size\r\n    * j - initial condition vector\r\n    * t_start = time at initial conditions\r\n    */\r\n    var m = j.length;\r\n    var t = t_start;\r\n    var k1, k2, k3, k4;\r\n    var yLast = j;\r\n\r\n    var x = new Array(n+1);  // x values\r\n    x[0] = t; // t start\r\n\r\n    var result = new Array(m);\r\n    for (let k = 0; k < m; k++) {\r\n        result[k] = new Array(n+1); // n + 1 points\r\n        result[k][0] = yLast[k];\r\n    }\r\n    for (let i = 1; i <= n; i++) {\r\n        k1 = f(t, yLast);\r\n        k2 = f(t + (.5 * h), _vecAdd2Sec(yLast, _scalarMult(.5 * h, k1, m), m));\r\n        k3 = f(t + (.5 * h), _vecAdd2Sec(yLast, _scalarMult(.5 * h, k2, m), m));\r\n        k4 = f(t + h, _vecAdd2Sec(yLast, _scalarMult(h, k3, m), m));\r\n        for (let k = 0; k < m; k++) {\r\n            yLast[k] += h * (k1[k] + (2 * k2[k]) + (2 * k3[k]) + k4[k]) / 6;\r\n            result[k][i] = yLast[k];\r\n        }\r\n        t += h;\r\n        x[i] = t;\r\n    }\r\n\r\n    return {xVals: x, yVals: result};\r\n}","\r\nimport { rungeKutta4 } from './rk.js';\r\n\r\n// Warn if overriding existing method\r\nif(Array.prototype.equals)\r\n    console.warn(\"Overriding existing Array.prototype.equals. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code.\");\r\n\r\n// attach the .equals method to Array's prototype to call it on any array\r\nArray.prototype.equals = function (array) {\r\n    // if the other array is a falsy value, return\r\n    if (!array)\r\n        return false;\r\n\r\n    // compare lengths - can save a lot of time \r\n    if (this.length !== array.length)\r\n        return false;\r\n\r\n    for (var i = 0, l=this.length; i < l; i++) {\r\n        // Check if we have nested arrays\r\n        if (this[i] instanceof Array && array[i] instanceof Array) {\r\n            // recurse into the nested arrays\r\n            if (!this[i].equals(array[i]))\r\n                return false;       \r\n        }           \r\n        else if (this[i] !== array[i]) { \r\n            // Warning - two different object instances will never be equal: {x:20} != {x:20}\r\n            return false;   \r\n        }           \r\n    }       \r\n    return true;\r\n}\r\n// Hide method from for-in loops\r\nObject.defineProperty(Array.prototype, \"equals\", {enumerable: false});\r\n\r\nexport class GeneralModel {\r\n\r\n    constructor () {\r\n        this.initial_conditions = {};\r\n        this.elem_reactions = [];  // list of dictionaries of elementary reactions\r\n        this.scheme = \"\";\r\n        this.func = null;  // function that returns dc_dt for current c and t for built model\r\n        this.diffEquations = '';  //variable that stores diff. equation text to be displayed\r\n        this.diffEquationsFRates = '';  //only forward rates diff eqs.\r\n    }\r\n\r\n    addElementaryReaction(from_comp=['A', 'A'], to_comp=['B', 'C'], forward_rate=1, backward_rate=0) {\r\n        let reaction = {\r\n            from_comp: from_comp,\r\n            to_comp: to_comp,\r\n            forward_rate: forward_rate,\r\n            backward_rate: backward_rate\r\n        };\r\n\r\n        for (let i = 0; i < this.elem_reactions.length; i++) {\r\n            let el = this.elem_reactions[i];\r\n            if (el.from_comp.equals(reaction.from_comp) && el.to_comp.equals(reaction.to_comp)) {\r\n                el.forward_rate = reaction.forward_rate;\r\n                el.backward_rate = reaction.backward_rate;\r\n                return;\r\n            }\r\n        }\r\n\r\n        this.elem_reactions.push(reaction);\r\n    }\r\n\r\n    getCompartments() {\r\n        let names = [];\r\n\r\n        this.elem_reactions.forEach(el => {\r\n            el.from_comp.forEach(comp => {\r\n                if (!(names.includes(comp))) names.push(comp);\r\n            });\r\n            el.to_comp.forEach(comp => {\r\n                if (!(names.includes(comp))) names.push(comp);\r\n            });\r\n        });\r\n\r\n        return names;\r\n    }\r\n\r\n    getLatexFormattedCompartments() {\r\n        let result = [];\r\n\r\n        for (let c of this.getCompartments()) {\r\n            // following code makes numbers subscript and text keeps normal, all text is then \r\n            // enclosed in \\\\mathrm{}, also dots . are replaced by \\\\cdot\r\n\r\n            // let chars = c.split('');\r\n            // let name = '';\r\n            // let numbers = null;\r\n\r\n            // let addNumbers = function () {\r\n            //     if (numbers == null) return;\r\n\r\n            //     name += `_{${numbers}}`;\r\n            //     numbers = null;\r\n            // }\r\n\r\n            // for (let i = 0; i < chars.length; i++) {\r\n            //     if (isNaN(chars[i])) {\r\n            //         addNumbers();\r\n            //         name += chars[i];\r\n            //     }\r\n            //     else {\r\n            //         numbers = numbers == null ? '' : numbers;\r\n            //         numbers += chars[i];\r\n            //         if (i === chars.length - 1)\r\n            //             addNumbers();\r\n            //     }\r\n            // }\r\n\r\n            // name = `\\\\mathrm{${c.replaceAll('.', '\\\\cdot ')}}`;\r\n            \r\n            result.push(`\\\\mathrm{${c.replaceAll('.', '\\\\cdot ')}}`);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    getRateNames(backwardRates=false) {\r\n\r\n        let comps = this.getCompartments();\r\n        let fComps = this.getLatexFormattedCompartments();\r\n        let dict = {};\r\n\r\n        for (let i = 0; i < comps.length + 1; i++) \r\n            dict[comps[i]] = fComps[i];\r\n\r\n        let rateNames = [];\r\n        for (let el of this.elem_reactions) {\r\n            let fFromComps = el.from_comp.map(c => dict[c]);\r\n            let fToComps = el.to_comp.map(c => dict[c]);\r\n\r\n            let occursFC = GeneralModel.occurences(fFromComps);\r\n            let occursTC = GeneralModel.occurences(fToComps);\r\n\r\n            fFromComps = [];\r\n            fToComps = [];\r\n\r\n            // if there is multiple compartments, find occurences and multiply them\r\n            for (let key in occursFC) {\r\n                let num = occursFC[key];\r\n                fFromComps.push(num === 1 ? key : `${num}${key}`);\r\n            }\r\n\r\n            for (let key in occursTC) {\r\n                let num = occursTC[key];\r\n                fToComps.push(num === 1 ? key : `${num}${key}`);\r\n            }\r\n\r\n            let fArrow = backwardRates ? '\\\\rightarrow' : '\\\\rightleftharpoons';\r\n            let frNoColor = `k_{${fFromComps.join('+')} ${fArrow} ${fToComps.join('+')}}`;\r\n\r\n            let fr = `{\\\\color{blue}${frNoColor}}`;\r\n            let br = `{\\\\color{red}k_{${fFromComps.join('+')} \\\\leftarrow ${fToComps.join('+')}}}`;\r\n\r\n            rateNames.push(backwardRates ? [fr, br] : frNoColor);\r\n        }\r\n\r\n        return rateNames;\r\n    }\r\n\r\n    printModel() {\r\n        console.log(`Scheme: ${this.scheme}`);\r\n        console.log(\"Initial conditions:\", this.initial_conditions);\r\n\r\n        this.elem_reactions.forEach(el => {\r\n            console.log(`Elementary reaction: ${el.from_comp.join(' + ')} -> ${el.to_comp.join(' + ')}, forward_rate=${el.forward_rate}, backward_rate=${el.backward_rate}`);\r\n        });\r\n    }\r\n\r\n    simulateModel(steps=500, range=[0, 100], useZeroBR=false) {\r\n        let j = Object.values(this.initial_conditions);   \r\n\r\n        let forward_rates = new Array(this.elem_reactions.length);\r\n        let backward_rates = new Array(this.elem_reactions.length);\r\n\r\n        for (let i = 0; i < this.elem_reactions.length; i++) {\r\n            forward_rates[i] = this.elem_reactions[i].forward_rate;\r\n            backward_rates[i] = useZeroBR ? 0 : this.elem_reactions[i].backward_rate;\r\n        }\r\n\r\n        let solution = rungeKutta4((t, c) => this.func(t, c, forward_rates, backward_rates), j, range, steps);\r\n\r\n        return solution;\r\n    }\r\n\r\n    static occurences(array, dict=null, subtractOccurences=false) {\r\n        /*\r\n        * Makes a dictionary of unique values in array and ascribes them a number of times they occured.\r\n        * If dict is not null, it uses this dictionary as a starting point.\r\n        * If subtractOccurences=true, if value exists already in dict, it will decresed by one. If not, \r\n        * it starts at -1.\r\n        */\r\n        dict = dict === null ? {} : dict;\r\n\r\n        let num = subtractOccurences ? -1 : 1;\r\n\r\n        for (var i = 0; i < array.length; i++) {\r\n            var value = array[i];\r\n            dict[value] = dict[value] ? dict[value] + num : num;\r\n        }\r\n        return dict;\r\n    }\r\n\r\n    _buildDiffEq(idx_from, idx_to, includeBackwardRates=true){\r\n        // builds latex type diff. equation for printing\r\n\r\n        let rateNames = this.getRateNames(true);\r\n        let compsF = this.getLatexFormattedCompartments();\r\n        let comps_len = compsF.length;\r\n\r\n        let posTerms = new Array(comps_len);\r\n        let negTerms = new Array(comps_len);\r\n        for (let i = 0; i < comps_len; i++) {\r\n            posTerms[i] = [];\r\n            negTerms[i] = [];\r\n        }\r\n\r\n        // build latex diff. equations\r\n        for (let i = 0; i < this.elem_reactions.length; i++) {\r\n            \r\n            let forward_prod = rateNames[i][0];\r\n            let backward_prod = rateNames[i][1];\r\n\r\n            let fList = idx_from[i].map(k => `[${compsF[k]}]`);\r\n            let bList = idx_to[i].map(k => `[${compsF[k]}]`);\r\n\r\n            let occursF = GeneralModel.occurences(fList);\r\n            let occursB = GeneralModel.occurences(bList);\r\n\r\n            for (let key in occursF) {\r\n                let num = occursF[key];\r\n                forward_prod += num === 1 ? key : `${key}^{${num}}`;\r\n            }\r\n\r\n            for (let key in occursB) {\r\n                let num = occursB[key];\r\n                backward_prod += num === 1 ? key : `${key}^{${num}}`;\r\n            }\r\n\r\n            idx_from[i].forEach(k => {\r\n                if (includeBackwardRates)\r\n                    posTerms[k].push(backward_prod);\r\n\r\n                negTerms[k].push(forward_prod);\r\n            });\r\n\r\n            idx_to[i].forEach(k => {\r\n                posTerms[k].push(forward_prod);\r\n\r\n                if (includeBackwardRates)\r\n                    negTerms[k].push(backward_prod);\r\n            });\r\n        }\r\n\r\n        // finish latex diff. equations\r\n\r\n        var result = '';\r\n\r\n        for (let i = 0; i < comps_len; i++) {\r\n            let posOccurs = GeneralModel.occurences(posTerms[i]);\r\n            let allOccurs = GeneralModel.occurences(negTerms[i], posOccurs, true); // subtract same occurences\r\n\r\n            let terms = [];\r\n            for (let key in allOccurs) {\r\n                let num = allOccurs[key];\r\n                if (num === 0)\r\n                    continue;\r\n\r\n                let sign = num > 0 ? '+' : '-';\r\n                let numStr = Math.abs(num) === 1 ? '' : Math.abs(num);\r\n                terms.push(`${sign}${numStr}${key}`);\r\n            }\r\n\r\n            result += `\\\\frac{\\\\mathrm d[${compsF[i]}]}{\\\\mathrm dt}&=${terms.join('')}\\\\\\\\`\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    buildFunc() {\r\n        let comps = this.getCompartments();\r\n        var comps_len = comps.length;\r\n\r\n        let inv_dict = {};\r\n        for (let i = 0; i < comps_len; i++)\r\n            inv_dict[comps[i]] = i;\r\n            \r\n        var r = this.elem_reactions.length;\r\n        var idx_from = [];  // arrays of arrays of indexes for each elementary reaction\r\n        var idx_to = [];  // arrays of arrays of indexes for each elementary reaction\r\n        var _forward_rates = [];\r\n        var _backward_rates = [];\r\n\r\n        for (let i = 0; i < r; i++) {\r\n            let el = this.elem_reactions[i];\r\n            \r\n            let i_from = el.from_comp.map(comp => inv_dict[comp]); // list of indexes of starting materials\r\n            let i_to = el.to_comp.map(comp => inv_dict[comp]);  // list of indexes of reaction products\r\n\r\n            idx_from.push(i_from);\r\n            idx_to.push(i_to);\r\n\r\n            _forward_rates[i] = el.forward_rate;\r\n            _backward_rates[i] = el.backward_rate;\r\n        }\r\n\r\n        this.diffEquations = this._buildDiffEq(idx_from, idx_to, true);\r\n        this.diffEquationsFRates = this._buildDiffEq(idx_from, idx_to, false);\r\n\r\n        this.func = (t, c, forward_rates=null, backward_rates=null) => {\r\n            if (forward_rates == null)\r\n                forward_rates = _forward_rates;\r\n            if (backward_rates == null)\r\n                backward_rates = _backward_rates;\r\n\r\n            let dc_dt = new Array(comps_len).fill(0);\r\n\r\n            for (let i = 0; i < r; i++) {\r\n\r\n                let forward_prod = forward_rates[i];\r\n                let backward_prod = backward_rates[i];\r\n                \r\n                for (let k = 0; k < idx_from[i].length; k++) {\r\n                    forward_prod *= c[idx_from[i][k]];\r\n                }\r\n\r\n                for (let k = 0; k < idx_to[i].length; k++) {\r\n                    backward_prod *= c[idx_to[i][k]];\r\n                }\r\n\r\n                for (let k = 0; k < idx_from[i].length; k++) {\r\n                    dc_dt[idx_from[i][k]] += backward_prod - forward_prod; // reactants\r\n                }\r\n\r\n                for (let k = 0; k < idx_to[i].length; k++) {\r\n                    dc_dt[idx_to[i][k]] += forward_prod - backward_prod; // products\r\n                }\r\n            }\r\n            return dc_dt;\r\n        };\r\n    }\r\n\r\n    static fromText(scheme) {\r\n        var _model = new GeneralModel();\r\n        _model.scheme = scheme;\r\n\r\n        let lines = scheme.split('\\n');\r\n\r\n        // debugger;\r\n\r\n\r\n        // + sign for separation of reactants cannot follow '_' and '^' characters and cannot be enclosed in curly braces\r\n\r\n        lines.forEach(line => {\r\n            line = line.split('//')[0]  // remove comments\r\n            let white_space_filter = line.match(/[^\\s]+/g);\r\n            if (line === \"\" || white_space_filter === null)\r\n                return;\r\n\r\n            line = white_space_filter.join('')  // remove white space characters\r\n            let sides = [];\r\n\r\n            line.split('=').forEach(side => {\r\n                let tokens = [];\r\n                \r\n                // find the indicies of + signs\r\n                var plusIndices = [];\r\n                for(var i = 0; i < side.length; i++) {\r\n                    if (side[i] === \"+\" && side[i - 1] !== '^' && side[i - 1] !== '_') {\r\n                        plusIndices.push(i);\r\n                    } \r\n                }\r\n\r\n                var re = /{[^{}]*\\+[^{}]*}/g;  // find the + signs enclosed in curly braces\r\n                var s = `${side}$`; // copy is needed, otherwise next code will cause infinite loop...\r\n                \r\n                var m;\r\n                while(m = re.exec(s)) {\r\n                    var deleted = true;\r\n                    let startIdx = m.index;\r\n                    let endIdx = startIdx + m[0].length - 1;\r\n                    while(deleted) {\r\n                        deleted = false;\r\n                        for (var i = 0; i <= plusIndices.length; i++){\r\n                            if (plusIndices[i] > startIdx && plusIndices[i] < endIdx) {\r\n                                plusIndices.splice(i, 1);\r\n                                deleted = true;\r\n                                break;                                \r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                console.log(plusIndices);\r\n\r\n                // split the side based on found indexes\r\n                let splitSide = [];\r\n                var lastIdx = 0;\r\n                for (var i = 0; i < plusIndices.length; i++){\r\n                    splitSide.push(side.substring(lastIdx, plusIndices[i]));\r\n                    lastIdx = plusIndices[i] + 1;\r\n                }\r\n                splitSide.push(side.substring(lastIdx, side.length));\r\n\r\n                splitSide.forEach(token => {\r\n\r\n                    // let regExp = /(\\d)([\\w\\d\\.]+)|([\\w\\d\\.]+)/g;\r\n                    let regExp = /^(\\d+).+/g;  // match multiple digits at followed by any number of characters, digits has to be at the begining of the string\r\n\r\n                    let match = regExp.exec(token);  // get groups\r\n\r\n                    // let notContainsNum = typeof match[1] == 'undefined';\r\n                    let containsNum = match != null;\r\n\r\n                    let number = containsNum ? parseInt(match[1]) : 1;\r\n                    let name = containsNum ? token.substring(match[1].length) : token;\r\n\r\n                    // if (number < 1) number = 1;\r\n                    \r\n                    for (let i = 0; i < number; i++) \r\n                        tokens.push(name);\r\n                });\r\n                sides.push(tokens);\r\n            });\r\n\r\n            for (let i = 0; i < sides.length - 1; i++) {\r\n                _model.addElementaryReaction(sides[i], sides[i+1]);\r\n            }\r\n\r\n        });\r\n\r\n        let comps = _model.getCompartments();\r\n        for (let i = 0; i < comps.length; i++)\r\n            _model.initial_conditions[comps[i]] = i === 0 ? 1 : 0;\r\n\r\n        return _model;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n","\r\n\r\n\r\n\r\n\r\nexport const kineticModels = [\r\n    {\r\n        class: \"Funny models\",\r\n        name: \"Cyclic model\",\r\n        description: \"\",\r\n        scheme: \"A = B = C = D = E = F = G = H = I = J = K = A\",\r\n        nonZeroBackwardRates: false,\r\n        initialConditions: {\r\n            A: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            B: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            C: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            D: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            E: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            F: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            G: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            H: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            I: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            J: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            K: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n        },\r\n    },\r\n    {\r\n        class: \"Funny models\",\r\n        name: \"Lotka-Volterra\",\r\n        description: \"\",\r\n        scheme: \"Rabbit = 2Rabbit\\nWolf = DeadWolf\\nWolf + Rabbit = 2Wolf\",\r\n        nonZeroBackwardRates: false,\r\n        initialConditions: {\r\n            Rabbit: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            Wolf: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            DeadWolf: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 4.4,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1.9,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1.3,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        class: \"Epidemic\",\r\n        name: \"SIR Model\",\r\n        description: \"TODO\",\r\n        scheme: \"Susceptible + Infected = 2Infected\\nInfected = Recovered\\nInfected = Dead\",\r\n        nonZeroBackwardRates: false,\r\n        initialConditions: {\r\n            Susceptible: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 100,\r\n                value: 10\r\n            },\r\n            Infected: {\r\n                logSlider: true,\r\n                min: 1e-5,\r\n                max: 10,\r\n                value: 1e-3\r\n            },\r\n            Recovered: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 10,\r\n                value: 0\r\n            },\r\n            Dead: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 10,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 0.6,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1.5,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.1,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        class: \"Epidemic\",\r\n        name: \"SEIRS Model\",\r\n        description: \"TODO\",\r\n        scheme: \"Susceptible + Infected = Exposed + Infected\\nExposed = Infected = Recovered = Susceptible\\nInfected = Dead\",\r\n        nonZeroBackwardRates: false,\r\n        initialConditions: {\r\n            Susceptible: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 100,\r\n                value: 10\r\n            },\r\n            Exposed: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 100,\r\n                value: 0\r\n            },\r\n            Infected: {\r\n                logSlider: true,\r\n                min: 1e-5,\r\n                max: 10,\r\n                value: 1e-4\r\n            },\r\n            Recovered: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 10,\r\n                value: 0\r\n            },\r\n            Dead: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 10,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 4,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.8,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 2.4,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.3,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.1,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        class: \"Chemical kinetics\",\r\n        name: \"Michaelis-Menten\",\r\n        description: \"TODO\",\r\n        scheme: \"E + S = ES = E + P\",\r\n        nonZeroBackwardRates: true,\r\n        initialConditions: {\r\n            E: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 3.5\r\n            },\r\n            S: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 10\r\n            },\r\n            ES: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            P: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 0.4,\r\n                backwardRate: 1.4,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1.9,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        class: \"Chemical kinetics\",\r\n        name: \"H2 + Br2\",\r\n        description: \"TODO\",\r\n        scheme: \"Br2 = 2Br.\\nBr. + H2 = HBr + H.\\nH. + Br2 = HBr + Br.\",\r\n        nonZeroBackwardRates: true,\r\n        initialConditions: {\r\n            'Br2': {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            'Br.': {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            'H2': {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            'HBr': {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            'H.': {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 0.4,\r\n                backwardRate: 0.9,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 2.9,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1.2,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            }\r\n        ],\r\n    },\r\n    {\r\n        class: \"Photochemistry\",\r\n        name: \"Photosensitization\",\r\n        description: \"TODO\",\r\n        scheme: \"tPS = PS\\n2tPS = tPS + PS\\ntPS + S = T + PS\\nT = S\",\r\n        nonZeroBackwardRates: false,\r\n        initialConditions: {\r\n            tPS: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            PS: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            S: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 2\r\n            },\r\n            T: {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 0.5,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.3,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.5,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n        ],\r\n    },\r\n    {\r\n        class: \"Photochemistry\",\r\n        name: \"Rose bengal kinetics\",\r\n        description: \"TODO\",\r\n        scheme: \"^3RB^{2-} = RB^{2-}\\n^3RB^{2-} + RB^{2-} = 2RB^{2-}\\n2^3RB^{2-} = ^3RB^{2-} + RB^{2-}\\n^3RB^{2-} + RB^{2-} = RB^{.-} + RB^{.3-}\\n2^3RB^{2-} = RB^{.-} + RB^{.3-}\\nRB^{.-} + RB^{.3-} = 2RB^{2-}\",\r\n        nonZeroBackwardRates: false,\r\n        initialConditions: {\r\n            \"^3RB^{2-}\": {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 1\r\n            },\r\n            \"RB^{2-}\": {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            \"RB^{.-}\": {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            },\r\n            \"RB^{.3-}\": {\r\n                logSlider: false,\r\n                min: 0,\r\n                max: 50,\r\n                value: 0\r\n            }\r\n        },\r\n        rates: [\r\n            {\r\n                forwardRate: 1.01,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.6,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 1.2,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 0.2,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 2.4,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n            {\r\n                forwardRate: 4.5,\r\n                backwardRate: 0,\r\n                forwardRateMin: 0,\r\n                forwardRateMax: 10,\r\n                backwardRateMin: 0,\r\n                backwardRateMax: 10,\r\n                forwardRateLogSlider: false,\r\n                backwardRateLogSlider: false\r\n            },\r\n        ],\r\n    },\r\n]\r\n\r\n\r\n\r\n\r\n\r\n// options = top100Films.map((option) => {\r\n//     const firstLetter = option.title[0].toUpperCase();\r\n//     return {\r\n//       firstLetter: /[0-9]/.test(firstLetter) ? '0-9' : firstLetter,\r\n//       ...option,\r\n//     };\r\n//   });\r\n\r\n","import { useState, React } from 'react';\r\nimport Plot from 'react-plotly.js';\r\n\r\n\r\n// var layout = {\r\n//     title: 'Title of the graph',\r\n//     xaxis: {\r\n//         title: 'Time',\r\n//         showgrid: true,\r\n//         zeroline: false,\r\n//         linecolor: 'black',\r\n//         linewidth: 1,\r\n//         mirror: true\r\n//     },\r\n//     yaxis: {\r\n//         title: 'Concentration',\r\n//         showgrid: true,\r\n//         zeroline: false,\r\n//         type: 'log',\r\n//         linecolor: 'red',\r\n//         linewidth: 1,\r\n//         mirror: true\r\n//     }\r\n// };\r\n\r\nexport default function PlotlyGraph( {data, layout, config, frames, revision }) {\r\n    return (\r\n      <Plot\r\n        data={data}\r\n        layout={ layout }\r\n        config={config}\r\n        frames={frames}\r\n        // onUpdate={figure => console.log('on update')}\r\n        revision={revision}\r\n        useResizeHandler={true}\r\n        style={{\r\n          width: '100%',\r\n          height: '100%'\r\n        }}\r\n      />\r\n    );\r\n}\r\n\r\n/*export default function PlotlyGraph(props) {\r\n\r\n  // const [data, setData] = React.useState(props.graphData);\r\n  // const [frames, setFrames] = React.useState([]);\r\n  // const [layout, setLayout] = React.useState(layout);\r\n  // const [config, setConfig] = React.useState({scrollZoom: true, responsive: false});\r\n\r\n  const [figure, setFigure] = useState({\r\n    data: [],\r\n    layout: {\r\n      xaxis: {\r\n        title: 'Time',\r\n        showgrid: true,\r\n        zeroline: false,\r\n        linecolor: 'black',\r\n        linewidth: 1,\r\n        mirror: true\r\n      },\r\n      yaxis: {\r\n          title: 'Concentration',\r\n          showgrid: true,\r\n          zeroline: false,\r\n          // type: 'log',\r\n          linecolor: 'black',\r\n          linewidth: 1,\r\n          mirror: true\r\n      }\r\n    },\r\n    frames: [], \r\n    config: {scrollZoom: true, responsive: false}\r\n  });\r\n\r\n  console.log('function called');\r\n  \r\n  function onUpdate(figure) {\r\n    console.log('on update');\r\n\r\n    figure.data = props.graphData\r\n\r\n    setFigure(figure)\r\n  }\r\n\r\n  function onInitialized(figure) {\r\n    console.log(\"on initialized\")\r\n    setFigure(figure)\r\n  }\r\n\r\n  return (\r\n    <Plot\r\n      data={figure.data}\r\n      layout={figure.layout}\r\n      frames={figure.frames}\r\n      config={figure.config}\r\n      onInitialized={onInitialized}\r\n      onUpdate={onUpdate}\r\n      //onHover={console.log('onHover')}\r\n    />\r\n  );\r\n}*/","import logo from './logo.svg';\r\nimport React from 'react';\r\nimport './App.css';\r\n// import InputSlider from './Slider.js'\r\nimport InitCondTable from './initCondTable.js';\r\nimport RatesTable from './ratesTable.js'\r\nimport Grid from '@material-ui/core/Grid';\r\nimport TextArea from './textArea.js';\r\nimport { GeneralModel } from './general_model.js';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { kineticModels } from './models.js';\r\n\r\n// import React from 'react';\r\n// import Icon from '@material-ui/core/Icon';\r\nimport PlotlyGraph from './graph.js'\r\n\r\nimport { BlockMath } from 'react-katex';\r\nimport 'katex/dist/katex.min.css';\r\n\r\n\r\nclass App extends React.Component {\r\n\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      initData: [],\r\n      ratesData: [],\r\n      schemeText: \"A^{+} + B^{2+} = B = C = D = E\",\r\n      // schemeText: \"S + I = 2I\\nI = R = S\",\r\n\r\n      figure: {\r\n        data: [],\r\n        layout: {\r\n          xaxis: {\r\n            title: 'Time',\r\n            showgrid: true,\r\n            zeroline: false,\r\n            linecolor: 'black',\r\n            linewidth: 2,\r\n            mirror: true\r\n          },\r\n          yaxis: {\r\n              title: 'Concentration',\r\n              showgrid: true,\r\n              zeroline: false,\r\n              // type: 'log',\r\n              linecolor: 'black',\r\n              linewidth: 2,\r\n              mirror: true\r\n          },\r\n          autosize: true\r\n          \r\n        },\r\n        frames: [], \r\n        config: {scrollZoom: true, responsive: false},\r\n        revision: 0  // when this value is changed, it forces the plot to redraw\r\n      },\r\n\r\n      texEquation: '',\r\n      cbNonZero: false\r\n    };\r\n\r\n    this.model = null;\r\n    this.modelSubmitted = this.modelSubmitted.bind(this);\r\n    this.sliderValueChanged = this.sliderValueChanged.bind(this);\r\n    this.cbNonZero_checkedChanged = this.cbNonZero_checkedChanged.bind(this);\r\n    this.textChangedCallback = this.textChangedCallback.bind(this);\r\n    this.sliderLogToggledCallback = this.sliderLogToggledCallback.bind(this);\r\n    this.modelChanged = this.modelChanged.bind(this);\r\n    // this.transferParsToModel = this.transferParsToModel.bind(this);\r\n\r\n    // this.options = top100Films.map((option) => {\r\n    //   const firstLetter = option.title[0].toUpperCase();\r\n    //   return {\r\n    //     firstLetter: /[0-9]/.test(firstLetter) ? '0-9' : firstLetter,\r\n    //     ...option,\r\n    //   };\r\n    // });\r\n\r\n    // console.log(this.options)\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.modelSubmitted();  // load default model after all components have loaded\r\n  }\r\n\r\n  simulModel(useZeroBR=false) {\r\n    let range = [0, 10];\r\n    let steps = 200;\r\n\r\n    let comps = this.model.getCompartments();\r\n    let solution = this.model.simulateModel(steps, range, useZeroBR);\r\n\r\n    //var graphData = new Array(comps.length);\r\n\r\n    var figure = this.state.figure\r\n\r\n    // update figure data\r\n    let diff = comps.length - figure.data.length;  // difference in number of current compartments and from new model\r\n    if (diff > 0) {\r\n        for (let i = 0; i < diff; i++)\r\n          figure.data.push({\r\n              x: [],\r\n              y: [],\r\n              mode: 'lines',\r\n              type: 'scatter',\r\n              name: ''\r\n            });\r\n    } else if (diff < 0){\r\n        for (let i = 0; i < -diff; i++)\r\n            figure.data.pop();\r\n    }\r\n\r\n    for (let i = 0; i < comps.length; i++) {\r\n      figure.data[i].x = solution.xVals\r\n      figure.data[i].y = solution.yVals[i]\r\n      figure.data[i].name = `${comps[i]}`\r\n    }\r\n    figure.revision += 1\r\n\r\n    return figure;\r\n  }\r\n\r\n  textChangedCallback(text) {\r\n    this.setState({\r\n      schemeText: text\r\n    })\r\n  }\r\n\r\n  modelSubmitted(selecteModel) {\r\n    let scheme = this.state.schemeText\r\n\r\n    if (scheme === \"\" || scheme.match(/[^\\s]+/g) === null){\r\n      alert('Scheme is empty!');\r\n      return;\r\n    }\r\n\r\n    let lastInitData = this.state.initData;\r\n    let lastRatesData = this.state.ratesData;\r\n\r\n    this.model = GeneralModel.fromText(scheme);\r\n    let comps = this.model.getCompartments();\r\n    let compsF = this.model.getLatexFormattedCompartments();\r\n    let rateNames = this.model.getRateNames();\r\n\r\n    let initData = new Array(comps.length);\r\n\r\n    for (let i = 0; i < initData.length; i++) {\r\n      // value from previous model\r\n      let init_value = (i < lastInitData.length) ? lastInitData[i].init : this.model.initial_conditions[comps[i]];\r\n      let log = (i < lastInitData.length) ? lastInitData[i].log : false;\r\n\r\n      let condition = typeof selecteModel === 'undefined';\r\n\r\n      initData[i] = {\r\n        texName: compsF[i], \r\n        init: condition ? init_value : selecteModel.initialConditions[comps[i]].value,\r\n        log: condition? log : selecteModel.initialConditions[comps[i]].logSlider,\r\n        min: condition? 0 : selecteModel.initialConditions[comps[i]].min,\r\n        max: condition? 50 : selecteModel.initialConditions[comps[i]].max\r\n      }\r\n      // transfer params to model\r\n      this.model.initial_conditions[comps[i]] = initData[i].init;\r\n    }\r\n    \r\n    // comps.map((c, i) => ({\r\n    //   texName: compsF[i], \r\n    //   init: (i < lastInitData.length) ? lastInitData[i].init : this.model.initial_conditions[c]\r\n    // }));\r\n\r\n    let ratesData = new Array(rateNames.length);\r\n    for (let i = 0; i < rateNames.length; i++) {\r\n      // values from previous model\r\n      let fr_val = (i < lastRatesData.length) ? lastRatesData[i].fr : this.model.elem_reactions[i].forward_rate;\r\n      let br_val = (i < lastRatesData.length) ? lastRatesData[i].br : this.model.elem_reactions[i].backward_rate;\r\n\r\n      let log_fr = (i < lastRatesData.length) ? lastRatesData[i].log_fr : false;\r\n      let log_br = (i < lastRatesData.length) ? lastRatesData[i].log_br : false;\r\n\r\n      let condition = typeof selecteModel === 'undefined' || typeof selecteModel.rates === 'undefined';\r\n\r\n      ratesData[i] = {\r\n        texName:  rateNames[i],\r\n        fr: condition ? fr_val : selecteModel.rates[i].forwardRate,\r\n        br: condition ? br_val : selecteModel.rates[i].backwardRate,\r\n        log_fr: condition ? log_fr : selecteModel.rates[i].forwardRateLogSlider, \r\n        log_br: condition ? log_br : selecteModel.rates[i].backwardRateLogSlider,\r\n        min_fr: condition ? 0 : selecteModel.rates[i].forwardRateMin,\r\n        max_fr: condition ? 10 : selecteModel.rates[i].forwardRateMax,\r\n        min_br: condition ? 0 : selecteModel.rates[i].backwardRateMin,\r\n        max_br: condition ? 10 : selecteModel.rates[i].forwardRateMax\r\n      }\r\n      // transfer params to model\r\n      this.model.elem_reactions[i].forward_rate = ratesData[i].fr;\r\n      this.model.elem_reactions[i].backward_rate = ratesData[i].br;\r\n    }\r\n\r\n    this.model.buildFunc();\r\n\r\n    let figure = this.simulModel(!this.state.cbNonZero);\r\n\r\n    this.setState({\r\n      initData: initData,\r\n      ratesData: ratesData,\r\n      figure: figure,\r\n      texEquation: this.state.cbNonZero ? this.model.diffEquations : this.model.diffEquationsFRates\r\n    });\r\n  }\r\n\r\n  sliderLogToggledCallback(type, index) {\r\n\r\n    let initData = this.state.initData;\r\n    let ratesData = this.state.ratesData;\r\n\r\n    switch (type) {\r\n      case \"init\":  // changing of initial conditions\r\n          initData[index].log = !initData[index].log;\r\n          break;\r\n      case \"fr\":   // changing of forward rate constants\r\n          ratesData[index].log_fr = !ratesData[index].log_fr;\r\n          break;\r\n      case \"br\":   // changing of backward rate constants\r\n          ratesData[index].log_br = !ratesData[index].log_br;\r\n          break;\r\n    }\r\n    this.setState({\r\n      initData: initData,\r\n      ratesData: ratesData\r\n    });\r\n  }\r\n\r\n  sliderValueChanged(type, index, value) {\r\n    // console.log(name, value);\r\n\r\n    // let split = name.split('_');\r\n    // let text = split[0];\r\n    // let num = parseInt(split[1]);\r\n    let f_val = parseFloat(value);\r\n\r\n    let initData = this.state.initData;\r\n    let ratesData = this.state.ratesData;\r\n\r\n    switch (type) {\r\n        case \"init\":  // changing of initial conditions\r\n            let comps = this.model.getCompartments();\r\n            this.model.initial_conditions[comps[index]] = f_val;\r\n            initData[index].init = f_val;\r\n            break;\r\n        case \"fr\":   // changing of forward rate constants\r\n            this.model.elem_reactions[index].forward_rate = f_val;\r\n            ratesData[index].fr = f_val;\r\n            break;\r\n        case \"br\":   // changing of backward rate constants\r\n            this.model.elem_reactions[index].backward_rate = f_val;\r\n            ratesData[index].br = f_val;\r\n            break;\r\n    }\r\n\r\n    let figure = this.simulModel(!this.state.cbNonZero);\r\n\r\n    this.setState({\r\n      figure: figure,\r\n      initData: initData,\r\n      ratesData: ratesData\r\n    });\r\n  }\r\n\r\n  modelChanged(event, objectChosen) {\r\n    if (objectChosen === null)\r\n      return\r\n    this.state.schemeText = objectChosen.scheme;\r\n    this.state.cbNonZero = objectChosen.nonZeroBackwardRates;\r\n    // console.log(objectChosen.scheme)\r\n    this.modelSubmitted(objectChosen);\r\n  }\r\n\r\n  cbNonZero_checkedChanged(event) {\r\n\r\n    let figure = this.simulModel(!event.target.checked);\r\n\r\n    this.setState({\r\n      texEquation: event.target.checked ? this.model.diffEquations : this.model.diffEquationsFRates,\r\n      cbNonZero: event.target.checked,\r\n      figure: figure\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        {/* <img src={logo} className=\"App-logo\" alt=\"logo\" /> */}\r\n        <p>Compartmental model simulator</p>\r\n  \r\n        <Grid container spacing={1} alignItems=\"column\" direction=\"row\">\r\n          <Grid item xs>\r\n\r\n            <Autocomplete\r\n              options={kineticModels.sort((a, b) => -b.class.localeCompare(a.class))}\r\n              groupBy={(option) => option.class}\r\n              getOptionLabel={(option) => option.name}\r\n              onChange={this.modelChanged}\r\n              renderInput={(params) => <TextField {...params} label=\"Kinetics models\" variant=\"outlined\" />}\r\n            />\r\n  \r\n            <TextArea schemeText={this.state.schemeText} modelSubmitCallback={this.modelSubmitted} textChangedCallback={this.textChangedCallback}/>\r\n\r\n            <FormControlLabel\r\n                control={<Checkbox color=\"secondary\" checked={this.state.cbNonZero} onChange={this.cbNonZero_checkedChanged} name=\"cbNonZero\" />}\r\n                label=\"Non-zero backwards rates\"\r\n            />\r\n\r\n            <BlockMath math={`\\\\begin{aligned} ${this.state.texEquation} \\\\end{aligned}`} errorColor={'#cc0000'}/>\r\n  \r\n            <InitCondTable \r\n              data={this.state.initData} \r\n              sliderChangedCallback={this.sliderValueChanged}\r\n              sliderLogToggledCallback={this.sliderLogToggledCallback}>\r\n            </InitCondTable>\r\n\r\n            <RatesTable \r\n              data={this.state.ratesData} \r\n              sliderChangedCallback={this.sliderValueChanged}\r\n              sliderLogToggledCallback={this.sliderLogToggledCallback}\r\n              disabled={!this.state.cbNonZero}>\r\n            </RatesTable>\r\n  \r\n          </Grid>\r\n          <Grid item xs>\r\n            <PlotlyGraph \r\n              data={this.state.figure.data}\r\n              frames={this.state.figure.frames}\r\n              config={this.state.figure.config}\r\n              layout={this.state.figure.layout}\r\n              revision={this.state.figure.revision}\r\n             />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n// function App() {\r\n//   return (\r\n//     <div className=\"App\">\r\n//       {/* <img src={logo} className=\"App-logo\" alt=\"logo\" /> */}\r\n//       <p>Application  react</p>\r\n\r\n//       <Grid container spacing={1} alignItems=\"column\" direction=\"row\">\r\n//         <Grid item xs>\r\n\r\n//           <TextArea text=\"A = B = C = D = E\"/>\r\n\r\n//           <InitCondTable data={init}></InitCondTable>\r\n//           <RatesTable data={data}></RatesTable>\r\n\r\n//         </Grid>\r\n//         <Grid item xs>\r\n//           <PlotlyGraph />\r\n//         </Grid>\r\n//       </Grid>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n// function App() {\r\n//   return <Button color=\"primary\">Hello World</Button>;\r\n// }\r\n\r\n// function App() {\r\n//   return (\r\n//     <div className=\"App\">\r\n//       <header className=\"App-header\">\r\n//         <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n//         <p>\r\n//           Edit <code>src/App.js</code> and save to reload.\r\n//         </p>\r\n//         <a\r\n//           className=\"App-link\"\r\n//           href=\"https://reactjs.org\"\r\n//           target=\"_blank\"\r\n//           rel=\"noopener noreferrer\"\r\n//         >\r\n//           Learn React\r\n//         </a>\r\n//       </header>\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}